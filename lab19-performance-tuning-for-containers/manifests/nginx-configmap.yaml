apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-config
  namespace: performance-lab
data:
  nginx.conf: |
    events {
      worker_connections 1024;
      use epoll;
      multi_accept on;
    }

    http {
      sendfile on;
      tcp_nopush on;
      tcp_nodelay on;
      keepalive_timeout 65;
      keepalive_requests 100;

      gzip on;
      gzip_vary on;
      gzip_min_length 1024;
      gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

      server {
        listen 80;
        location / {
          root /usr/share/nginx/html;
          index index.html;
        }
      }
    }
